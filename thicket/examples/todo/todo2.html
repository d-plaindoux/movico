<!DOCTYPE html>
<html lang="en">
<!--
/*
 * Thicket
 * https://github.com/d-plaindoux/thicket
 *
 * Copyright (c) 2015 Didier Plaindoux
 * Licensed under the LGPL2 license.
 */
-->

<head>
  <link rel="stylesheet" type="text/css" href="todo2.css">
  <script src="/thicket/build/thicket-lang.min.js"></script>
  <script type="text/thicket">
    def view : string -> string -> dom = text clazz ->
        <div class=clazz><i> text </i></div> 
    
    def todo : string -> dom = text -> { 
        (view text "actionable todo")
        onMouseEvent MouseClick { node -> 
            node replace (view text "actionable done")
            onMouseEvent MouseClick dom::remove
        }
    }
    
    def manageTodos : dom -> dom = node -> {
        1 to 10 fold node (node i -> node addChild $ todo $ "#" + i)
    }

    for todo <- {document "todo" find} 
    yield 
        manageTodos todo
  </script>
    
  <script>
    function onLoad() {
        var t0 = new Date();
        console.log("-----------------------------");    
        console.log("Boot Thicket " + t0.toDateString());
        require('thicket')('/thicket/site').boot();
        console.log("Boot done in " + (new Date().getTime() - t0.getTime()) + " ms");
    }
  </script>
</head>    
<body class="noselect" onload="onLoad()">
  <div class="runtime">
  <b>Things to do:</b>
  <div id="todo"></div>
  </div>
  
  <br>

  <div class="sourcecode">
  <b>Current Sample</b>
    <pre><code>
    def view : string -> string -> dom = text clazz ->
        &lt;div class=clazz>&lt;i> text &lt;/i>&lt;/div> 
    
    def todo : string -> dom = text -> { 
        (view text "actionable todo")
        onEvent MouseClick { node -> 
            node replace (view text "actionable done")
            onEvent MouseClick dom::remove
        }
    }
    
    def manageTodos : dom -> dom = n -> {
        1 to 10 fold node (i node -> node addChild $ todo $ "#" + i)
    }

    document "todos" find map manageTodos
    </code></pre>
  </div>
</body>
</html>
