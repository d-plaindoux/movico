#!/bin/sh

#
# Thicket
# https://github.com/d-plaindoux/thicket
#
# Copyright (c) 2015-2016 Didier Plaindoux
# Licensed under the LGPL2 license.
#
 
#
# Set the Thicket home
# 

RELATIVE=`dirname "$0"`/..
THICKET_HOME="`cd \"$RELATIVE\" 2>/dev/null && pwd || echo \"$RELATIVE\"`"
NODE_EXE=node

#
# Execute the command
#

COMMAND=$1

shift

case $COMMAND in
  help)
     
    ;;
  build)
    exec $RELATIVE/bin/build.sh
    ;;
  compile)
    node $THICKET_HOME/lib/Thicket/frontend/tktc.js $@
    ;;
  toplevel)
    $NODE_EXE $THICKET_HOME/lib/Thicket/frontend/repl.js $@
    ;;
  execute)
    $NODE_EXE $THICKET_HOME/lib/Thicket/frontend/exec.js $@
    ;;
  package)
    $NODE_EXE $THICKET_HOME/lib/Thicket/frontend/pack.js $@
    ;; 
  *)
    echo "$0 (build|compile|package|toplevel|execute) ..."
esac
