#!/bin/sh

#
# Thicket
# https://github.com/d-plaindoux/thicket
#
# Copyright (c) 2015 Didier Plaindoux
# Licensed under the LGPL2 license.
#
 
#
# Set the HOME
# 

RELATIVE=`dirname "$0"`/..
THICKET_HOME="`cd \"$RELATIVE\" 2>/dev/null && pwd || echo \"$RELATIVE\"`"
NODE_EXE=node

#
# Retrieve the command ...
#

COMMAND=$1

shift

case $COMMAND in
  compile)
     node $THICKET_HOME/lib/Thicket/frontend/tktc.js $@
     ;;
  toplevel)
     $NODE_EXE $THICKET_HOME/lib/Thicket/frontend/repl.js $@
     ;;
  execute)
     $NODE_EXE $THICKET_HOME/lib/Thicket/frontend/exec.js $@
     ;;
  package)
     $NODE_EXE $THICKET_HOME/lib/Thicket/frontend/pack.js $@
     ;; 
  *)
     echo "$0 (compile|package|toplevel|execute) ..."
esac
