model APerson { 
    firstname: string
    name: string
    age: int
}

view PersonView(this : Person) {
  <div onClick=(this.tick ())> 
    <div>this.firstname</div>
    <div>this.name</div>
    <div>this.age</div>
  </div>
}
 
view PersonAdder(this : Population) {
  <form onSubmit=(this.addPerson APerson{firstname name 0})>
     <input type="text" id="firstname"/>
     <input type="text" id="name"/>
     <input type="submit" value="Add"/>
  </form>
}

view PopulationView(this : Population) {
  [PersonView Person(p) for p <- this.persons()]
  (PersonAdder this)
}

controller Person(this : APerson) {
  firstname = this.firstname
  name = this.name
  age = this.age
  tick () = (self (this.age(this.age.add 1)))
}

controller Population(this : [APerson]) {
  persons() = [p for p <- this if p.age.leq 100]
  addPerson p = (self(this.add p))
}
