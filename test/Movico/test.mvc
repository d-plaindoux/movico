// Models

model PersonModel { 
    firstname: string
    name: string
    age: int
}

// Views

view PersonView this:Person {
  <div onClick=(this.tick ())> 
    <div>this.firstname</div>
    <div>this.name</div>
    <div>this.age</div>
  </div>
}
 
view NewPerson this:Population {
  <form onSubmit=(this.addPerson APerson{self.firstname self.name 0})>
     <input type="text" id="firstname"/>
     <input type="text" id="name"/>
     <input type="submit" value="Add"/>
  </form>
}

view Population this:Population {
  [PersonView Person(p) for p in this.persons()]
  <hr/>
  (NewPerson this)
}

// Controllers

controller Person this:PersonModel {
  firstname = this.firstname
  name = this.name
  age = this.age
  tick () = (self (this.age(this.age.add 1)))
} 

controller Population this:[Person] {
  persons() = [p for p in this if p.age.leq 100]
  addPerson p = (self(this.add p))
}

model TodoModel {
    what: string
}

controller Todos this:[TodoModel] {
    new s = (self(this.add(Todo{s})))
    todos = this
}

// Todos : viewed
view TodosView this: Todos {
    [ <li> p.what </li> for p in this.todos ]
}

// Todos : controlled
view TodoAdder this: Todos {
  <form onSubmit=(this.new self.todo)>
     <input type="text" id="todo"/>
     <input type="submit" value="Add"/>
  </form>
}
