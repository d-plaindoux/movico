model Option[a] {}

model Some[a] : Option[a] {
    value : a
} 

model None[a] : Option[a] {}

class OptionClass[a] this:Option[a] {
    map     : [b] (a -> b) -> Option[b]
    flatmap : [b] (a -> Option[b]) -> Option[b]
} {
    def Some[a].map f = Some (f this.value)
    def Some[a].flatmap f = f this.value

    def None[a].map f = None
    def None[a].flatmap f = sNone
}
