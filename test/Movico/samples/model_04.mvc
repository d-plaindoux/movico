model Option [a] {}

model Some[a] : Option[a] {
    _ : a
} 

model None[a] : Option[a] {}

class OptionClass[a] this:Option[a] {
    map     : [b] (a -> b) -> Option[b]
    flatmap : [b] (a -> Option[b]) -> Option[b]
} {
    // def Some[a].map f = Some (f this._)
    def Some[a].flatmap f = f this._

    def None[a].map f = None
    // def None[a].flatmap f = None
}
