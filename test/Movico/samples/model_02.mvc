// Simple example with a model and a view 

model dom

model string {
    toDom : dom
}

model list[a] {
    (+)   : a -> list[a]
    map   : [b] (a -> b) -> list[b]
    toDom : dom
}

model number {
    toString : string
}

model Todo {
    date  : number
    value : string
}

/**
 * Todo set controller
 */

class todos this:list[Todo] {
    unbox  : list[Todo]
    change : number -> string -> todos    
} {
    def unbox = this
    def change d w = self $ this + $ Todo d w
}

/**
 * View for rendering
 */

view TodoSetView this:todos {
    <div> 
        [ TodoView t for t in this unbox ].toDom
    </div>
} 

view TodoView this:Todo {
    <div class="todo" when=(this date toString)> (this value toDom) </div>
} 
